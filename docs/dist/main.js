/*! assessment-frontend 2022-07-13 */
function getAPIURL(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t.responseText}function getMockAPICategoryList(){var e=getAPIURL("../mock-api/V1/categories/list");return JSON.parse(e).items}function getMockAPIProductList(e){e=getAPIURL("../mock-api/V1/categories"+e);return JSON.parse(e)}function toogleProductLayoutType(e){let t=document.querySelector(".js-product-wrapper[layout]");null!==t&&t.setAttribute("layout",e)}function removeActiveStateLayoutButton(){let e=document.querySelectorAll(".js-show-by-layout.active[layout]");null!==e&&e.forEach(e=>{e.classList.remove("active")})}function filterProducts(e){let r=e.getAttribute("type"),i=getMockAPIProductList(getCategoryID()).items,a=document.querySelector(".js-product-wrapper .l-flex");if(null!==a){let t=e.getAttribute(r);e=i.filter(e=>{if(e.filter.pop()[r]===t)return e});a.innerHTML=renderProducts(e)}}function handleFilterButton(e){e.classList.contains("active")?(e.setAttribute("aria-pressed",!1),e.classList.remove("active"),resetProductFilter()):(removeActiveStateFilterButtons(),e.classList.add("active"),e.setAttribute("aria-pressed",!0),filterProducts(e))}function resetProductFilter(){let e=document.querySelector(".js-product-wrapper .l-flex");var t;null!==e&&(t=getMockAPIProductList(getCategoryID()).items,e.innerHTML=renderProducts(t))}function removeActiveStateFilterButtons(){let e=document.querySelectorAll(".js-filter-button.active");null!==e&&e.forEach(e=>{e.setAttribute("aria-pressed",!1),e.classList.remove("active")})}function getCategoryID(){let e=new URLSearchParams(window.location.search);return e.get("id")}function toggleNavbar(){let e=document.querySelector(".js-main-nav");null!==e&&e.classList.toggle("active")}function toggleHeaderSearchbar(){let e=document.querySelector(".js-header-search");null!==e&&e.classList.toggle("active")}function removeActiveStateFromMobileElements(){[".js-main-nav",".js-header-search",".js-toggle-header-search",".js-toggle-main-nav"].forEach(e=>{let t=document.querySelector(e+".active");null!==t&&(t.classList.remove("active"),t.hasAttribute("aria-pressed")&&t.setAttribute("aria-pressed","false"))})}document.addEventListener("click",e=>{let t=e.target.closest(".js-show-by-layout[layout]");if(null!==t){switch(t.getAttribute("layout")){case"grid":toogleProductLayoutType("grid");break;case"list":toogleProductLayoutType("list")}removeActiveStateLayoutButton(),t.classList.add("active")}}),document.addEventListener("click",e=>{e=e.target.closest(".js-filter-button");null!==e&&handleFilterButton(e)}),document.addEventListener("keydown",e=>{var t=e.target.closest(".js-filter-button");"Enter"===e.key&&null!==t&&handleFilterButton(t)}),document.addEventListener("click",e=>{null===e.target.closest("header")&&removeActiveStateFromMobileElements()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&removeActiveStateFromMobileElements()}),document.addEventListener("click",e=>{let t=e.target.closest(".js-toggle-header-search");null!==t&&(removeActiveStateFromMobileElements(),t.setAttribute("aria-pressed","true"),t.classList.toggle("active"),toggleHeaderSearchbar())}),document.addEventListener("click",e=>{let t=e.target.closest(".js-toggle-main-nav");null!==t&&(removeActiveStateFromMobileElements(),t.setAttribute("aria-pressed","true"),t.classList.toggle("active"),toggleNavbar())});const gitHubURL="/Teste-Desenvolvedor-Front-End-Web-Jump";function renderNavigationWithCategories(){let r=getMockAPICategoryList(),e=document.querySelectorAll(".js-render-nav-categories");null!==r&&null!==e&&e.forEach(e=>{var t='<li><a href="'+gitHubURL+'">Página inicial</a> </li>';t+=setCategoryListElements(r)+'<li><a href="'+gitHubURL+'">Contato</a></li>',e.innerHTML=t})}function setCategoryListElements(e){let t="";return e.forEach(e=>{t+='<li><a href="/categoria.html?id='+e.id+'">'+e.name+"</a></li>"}),t}function isValidCategoryPage(e,t){let r=window.location.pathname;return!("categoria"!==r.split("/").pop().replace(".html","")||!e.has(t))}function renderCategoryPageContent(){var e,t,r;let i=new URLSearchParams(window.location.search);isValidCategoryPage(i,"id")&&(r=i.get("id"),e=getMockAPICategoryList(),t=getMockAPIProductList(r),renderBreadcrumb((r=e[r-1]).name),renderFilterContent(t,e),renderProductContent(t,r))}function renderBreadcrumb(e){let t=document.querySelector(".js-render-breadcrumb");null!==t&&(t.innerHTML='<a href="'+gitHubURL+'">Página inicial</a> <span aria-hidden="true">></span> <span class="c-breadcrumb__current">'+e+"</span>")}function renderProductContent(e,t){let r=document.querySelector(".js-render-product-content");var i;null!==r&&(t="<h1>"+t.name+'</h1><div class="c-sort-bar l-flex l-flex--center l-flex--wrap"><div class="c-sort-bar__display c__mobile-hide"><button class="c-sort-bar__display-button active js-show-by-layout" layout="grid" title="Exibição por grade"><i class="fa-solid fa-grip"></i></button><button class="c-sort-bar__display-button js-show-by-layout" layout="list" title="Exibição por lista"><i class="fa-solid fa-list"></i></button></div><div class="c-sort-bar_data-option">Ordernar por<select><option value="Preço">Preço</option></select></div></div>',i='<div class="c-product-wrapper js-product-wrapper" layout="grid"><div class="l-flex l-flex--center l-flex--wrap l-flex--stretch l-flex--negative">',t+=(i+=renderProducts(e.items)+"</div>")+renderPagination(),r.innerHTML=t)}function renderProducts(e){let t=e,r="";return t.forEach(e=>{r+='<article class="l__col-3"><div class= "c-product js-product" tabindex="0"><div class= "c-product__img l-flex l-flex--center"><img src="/assets/img/'+e.image+'" aria-hidden="true"></div><div class="c-product__info"><h2>'+e.name+"</h2>"+handleProductPrices(e)+'<div class="c-product__button">Comprar</div></div></div></article>'}),r}function renderPagination(){let t='<div class="c-pagination l-flex l-flex--center"><div class="c-pagination__prev-next" title="Ir para página anterior" role="button"><i class="fa-solid fa-chevron-left"></i></div>';for(let e=1;e<=5;e++)t+='<div class="c-pagination__page">'+e+"</div>";return t+='<div class="c-pagination__prev-next"><i class="fa-solid fa-chevron-right" title="Ir para página posterior" role="button"></i></div></div>'}function handleProductPrices(e){let t='<div class="c-product__price l-flex l-flex--center">',r=e.specialPrice,i=e.price;if(null!==i)return i=i.toFixed(2).replace(".",","),void 0!==r?(r=r.toFixed(2).replace(".",","),t+='<div class="c-product__old-price"><span aria-hidden="true">R$</span><span class="c__acessibility-text">Preço antigo</span>'+i+'<span class="c__acessibility-text">reais</span></div><div class="c-product__current-price"><span aria-hidden="true">R$</span><span class="c__acessibility-text">Preço promocional:</span>'+r+'<span class="c__acessibility-text">reais</span></div>'):t+='<div class="c-product__current-price"><span aria-hidden="true">R$</span>'+i+'<span class="c__acessibility-text">reais</span></div>',t+="</div>"}function renderFilterContent(r,i){let a=document.querySelector(".js-render-product-filter");if(null!==a){let e=r.filters.map(e=>Object.keys(e)[0]),t="<h3>Categorias</h3><ul>";t+=setCategoryListElements(i)+"</ul>",e.includes("color")&&(t+="<h3>Cores</h3>"+setColorListElements(r)),e.includes("gender")&&(t+="<h3>Gêneros</h3><ul>"+setGenderListElements(r)+"</ul>"),a.innerHTML=t}}function setColorListElements(e){let t=e.items,r='<ul class="l-flex l-flex--wrap">',i=[];return t.forEach(e=>{e=e.filter[0];i.includes(e.color)||i.push(e.color)}),i.forEach(e=>{r+='<li role="button" class="l__col-4 js-filter-button" type="color" color="'+e+'" title="Filtrar por cor '+e+' " aria-pressed="false" tabindex="0"></li>'}),r+="</ul>"}function setGenderListElements(e){let t=e.items,r="",i=[];return t.forEach(e=>{e=e.filter[0];i.includes(e.gender)||i.push(e.gender)}),i.forEach(e=>{r+='<li role="button" class="js-filter-button" type="gender" gender="'+e+'" aria-pressed="false" tabindex="0"><span class="c__acessibility-text">Filtrar por</span>'+e+"</li>"}),r}function init(){renderNavigationWithCategories(),renderCategoryPageContent()}init();